<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"lyvivian0077.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.5.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta name="description" content="原文  在Linux学习过程中，我们无可避免的会碰到一个既让人喜欢，又令人头疼的神奇的东西——bash编程，即shell脚本。那么什么是shell脚本呢？shell是一个命令语言解释器，而shell脚本则是Linux命令的集合，按照预设的顺序依次解释执行，来完成特定的、较复杂的系统管理任务，类似于Windows中的批处理文件。本文带来的是bash编程的基础语法讲解。 bash编程之变量bash变">
<meta property="og:type" content="article">
<meta property="og:title" content="Bash编程超详细语法总结">
<meta property="og:url" content="https://lyvivian0077.github.io/2020/02/03/Bash%E7%BC%96%E7%A8%8B%E8%B6%85%E8%AF%A6%E7%BB%86%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="总有刁民想要害朕">
<meta property="og:description" content="原文  在Linux学习过程中，我们无可避免的会碰到一个既让人喜欢，又令人头疼的神奇的东西——bash编程，即shell脚本。那么什么是shell脚本呢？shell是一个命令语言解释器，而shell脚本则是Linux命令的集合，按照预设的顺序依次解释执行，来完成特定的、较复杂的系统管理任务，类似于Windows中的批处理文件。本文带来的是bash编程的基础语法讲解。 bash编程之变量bash变">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-02-03T06:38:19.000Z">
<meta property="article:modified_time" content="2021-06-22T03:58:45.709Z">
<meta property="article:author" content="lyvivian">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lyvivian0077.github.io/2020/02/03/Bash%E7%BC%96%E7%A8%8B%E8%B6%85%E8%AF%A6%E7%BB%86%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://lyvivian0077.github.io/2020/02/03/Bash%E7%BC%96%E7%A8%8B%E8%B6%85%E8%AF%A6%E7%BB%86%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/","path":"2020/02/03/Bash编程超详细语法总结/","title":"Bash编程超详细语法总结"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Bash编程超详细语法总结 | 总有刁民想要害朕</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">总有刁民想要害朕</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#bash%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%8F%98%E9%87%8F"><span class="nav-number">1.</span> <span class="nav-text">bash编程之变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#bash%E5%8F%98%E9%87%8F%E7%B1%BB%E5%88%AB"><span class="nav-number">1.1.</span> <span class="nav-text">bash变量类别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bash%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="nav-number">1.2.</span> <span class="nav-text">bash的配置文件：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%EF%BC%9A%E8%AE%BE%E5%AE%9A%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%EF%BC%8C%E5%AE%9A%E4%B9%89%E5%91%BD%E4%BB%A4%E5%88%AB%E5%90%8D"><span class="nav-number">1.2.1.</span> <span class="nav-text">功能：设定本地变量，定义命令别名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bash%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BC%96%E5%86%99%E6%A0%BC%E5%BC%8F%E5%8F%8A%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F"><span class="nav-number">1.2.2.</span> <span class="nav-text">bash编程之编写格式及执行方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bash%E4%B9%8B%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E4%B8%8E%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="nav-number">1.2.3.</span> <span class="nav-text">bash之算数运算与逻辑运算</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bash%E7%BC%96%E7%A8%8B%E4%B9%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.3.</span> <span class="nav-text">bash编程之条件测试语句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#bash%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95"><span class="nav-number">1.3.1.</span> <span class="nav-text">bash条件测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bash%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.3.2.</span> <span class="nav-text">bash编程之循环语句</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bash%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%87%BD%E6%95%B0"><span class="nav-number">1.4.</span> <span class="nav-text">bash编程之函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84%EF%BC%9A"><span class="nav-number">1.4.1.</span> <span class="nav-text">语法结构：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bash%E7%BC%96%E7%A8%8B%E4%B9%8B%E4%BF%A1%E5%8F%B7%E6%8D%95%E6%8D%89"><span class="nav-number">1.4.2.</span> <span class="nav-text">bash编程之信号捕捉</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bash%E7%BC%96%E7%A8%8B%E4%B9%8B%E6%95%B0%E7%BB%84"><span class="nav-number">1.5.</span> <span class="nav-text">bash编程之数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bash%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="nav-number">1.6.</span> <span class="nav-text">bash编程之字符串操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#pattern%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8globbing%E4%B8%AD%E7%9A%84%E5%85%83%E5%AD%97%E7%AC%A6%EF%BC%9A-%EF%BC%9F"><span class="nav-number">1.6.1.</span> <span class="nav-text">pattern可以使用globbing中的元字符：* ？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="nav-number">1.6.2.</span> <span class="nav-text">变量赋值操作：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mktemp%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="nav-number">1.6.3.</span> <span class="nav-text">mktemp命令：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#install%E5%91%BD%E4%BB%A4"><span class="nav-number">1.6.4.</span> <span class="nav-text">install命令:</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">lyvivian</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">32</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span>
      </div>
  </nav>
</div>



          </div>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lyvivian0077.github.io/2020/02/03/Bash%E7%BC%96%E7%A8%8B%E8%B6%85%E8%AF%A6%E7%BB%86%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lyvivian">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="总有刁民想要害朕">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Bash编程超详细语法总结
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-02-03 15:38:19" itemprop="dateCreated datePublished" datetime="2020-02-03T15:38:19+09:00">2020-02-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-06-22 12:58:45" itemprop="dateModified" datetime="2021-06-22T12:58:45+09:00">2021-06-22</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/r5KNvm90qYnnNOL3TAVXJA">原文</a></li>
</ul>
<p>在Linux学习过程中，我们无可避免的会碰到一个既让人喜欢，又令人头疼的神奇的东西——bash编程，即shell脚本。<br>那么什么是shell脚本呢？shell是一个命令语言解释器，而shell脚本则是Linux命令的集合，<br>按照预设的顺序依次解释执行，来完成特定的、较复杂的系统管理任务，类似于Windows中的批处理文件。<br>本文带来的是bash编程的基础语法讲解。</p>
<h2 id="bash编程之变量"><a href="#bash编程之变量" class="headerlink" title="bash编程之变量"></a>bash编程之变量</h2><h3 id="bash变量类别"><a href="#bash变量类别" class="headerlink" title="bash变量类别"></a>bash变量类别</h3><p><strong>本地变量</strong> : 只对当前shell进程有效的变量，对其它shell进程无效，包当前shell进程的子进程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VAR_NAME=VALUE</span><br></pre></td></tr></table></figure>

<p><strong>变量赋值</strong> : 向变量的存储空间保存数据</p>
<p><strong>变量引用</strong> : ${VAR_NAME} </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;:弱引用，里面的变量会被替换</span><br><span class="line">&#x27;&#x27;:强引用，里面的所有字符都是字面量，直接输出</span><br></pre></td></tr></table></figure>

<p><strong>环境变量</strong> : 对当前shell进程及其子shell有效，对其它的shell进程无效</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">定义：export VAR_NAME=VALUE</span><br><span class="line">导出：export VAR_NAME</span><br><span class="line">撤消变量：unset VAR_NAME</span><br><span class="line">只读变量：readonly VAR_NAME</span><br></pre></td></tr></table></figure>

<p><strong>局部变量</strong> : 对shell脚本中某代码片断有效，通常用于函数本地</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">local VAR_NAME=VALUE</span><br></pre></td></tr></table></figure>

<p><strong>位置变量</strong> : 用来接受变量指定位置的参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$1,$2...,$&#123;10&#125;</span><br></pre></td></tr></table></figure>

<p><strong>特殊变量</strong> : shell对一些参数做特殊处理,这些参数只能被引用而不能被赋值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$#  传递到脚本的参数个数</span><br><span class="line">$*  显示所有向脚本传递的参数                  #与位置变量不同，此选项参数可超过9个</span><br><span class="line">$$  获取当前shell的进程号</span><br><span class="line">$!  执行上一个指令的进程号</span><br><span class="line">$?  获取执行的上一个指令的返回值              #0为执行成功，非零为执行失败</span><br><span class="line">$-  显示shell使用的当前选项，与set命令功能相同</span><br><span class="line">$@  与$*相同，但是使用时加引号，并在引号中返回每个参数</span><br></pre></td></tr></table></figure>

<p><strong>查看变量</strong> :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set：查看当前shell进程中的所有变量</span><br><span class="line">export, printenv, env：查看当前shell进程中的所有环境变量</span><br></pre></td></tr></table></figure>

<p><strong>变量命名</strong> :</p>
<ol>
<li>不能使用程序中的关键字（保留字）</li>
<li>只能使用数字、字母和下划线，且不能以数字开头</li>
<li>要见名知义</li>
</ol>
<p><strong>变量类型</strong> :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">数值型：精确数值(整数)，近似数值（浮点型）</span><br><span class="line">字符型：char,string</span><br><span class="line">布尔型：true, false</span><br></pre></td></tr></table></figure>

<p><strong>类型转换</strong> :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">显式转换</span><br><span class="line">隐式转换</span><br></pre></td></tr></table></figure>


<h3 id="bash的配置文件："><a href="#bash的配置文件：" class="headerlink" title="bash的配置文件："></a>bash的配置文件：</h3><h4 id="功能：设定本地变量，定义命令别名"><a href="#功能：设定本地变量，定义命令别名" class="headerlink" title="功能：设定本地变量，定义命令别名"></a>功能：设定本地变量，定义命令别名</h4><ul>
<li>profile类：为交互式登录的用户提供配置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">全局：/etc/profile、/etc/profile.d/*.sh</span><br><span class="line">用户：~/.bash_profile</span><br></pre></td></tr></table></figure>

<ul>
<li>bashrc类：为非交互式的用户提供配置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">全局：/etc/bashrc</span><br><span class="line">用户：~/.bashrc</span><br></pre></td></tr></table></figure>

<h4 id="bash编程之编写格式及执行方式"><a href="#bash编程之编写格式及执行方式" class="headerlink" title="bash编程之编写格式及执行方式"></a>bash编程之编写格式及执行方式</h4><ul>
<li>编写格式：shell脚本第一行必须顶格写，用shebang定义指定的解释器来解释该脚本。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash       #!即为shebang</span><br><span class="line"># 其它的以#开头的行均为注释，会被解释器忽略，可用来注释脚本用途及版本，方便使用管理。</span><br></pre></td></tr></table></figure>

<ul>
<li>执行方式：bash编程属于面向过程编程，执行方式如下：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">顺序执行：按命令先后顺寻依次执行</span><br><span class="line">选择执行：测试条件，可能会多个测试条件，某条件满足时，则执行对应的分支</span><br><span class="line">循环执行：将同一段代码反复执行多次，因此，循环必须有退出条件；否则，则陷入死循环</span><br></pre></td></tr></table></figure>

<ul>
<li>bash执行选项：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash -n SHELLNAME  #语法测试，测试是否存在语法错误</span><br><span class="line">bash -x SHELLNAME  #模拟单步执行，显示每一步执行过程</span><br></pre></td></tr></table></figure>


<h4 id="bash之算数运算与逻辑运算"><a href="#bash之算数运算与逻辑运算" class="headerlink" title="bash之算数运算与逻辑运算"></a>bash之算数运算与逻辑运算</h4><ul>
<li><p>算数运算</p>
<ul>
<li>定义整型变量：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let VAR_NAME=INTEGER_VALUE            #例如：let a=3</span><br><span class="line">declare -i VAR_NAME=INTEGER_VALUE     #declare -i a=3</span><br></pre></td></tr></table></figure></li>
<li>实现算术运算的方式：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let VAR_NAME=ARITHMATIC_EXPRESSION</span><br><span class="line">VAR_NAME=$[ARITHMATIC_EXRESSION]</span><br><span class="line">VAR_NAME=$((EXPRESSION))</span><br><span class="line">VAR_NAME=$(expr $num1 + $num2)</span><br></pre></td></tr></table></figure></li>
<li>算术运算符：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+：加法</span><br><span class="line">-：减法</span><br><span class="line">*：乘法</span><br><span class="line">/：整除</span><br><span class="line">%：取余数</span><br><span class="line">**：乘幂</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：即使没有定义为整型变量，字符型的数字依然可以参与算术运算，bash会执行变量类型的隐式类型转换。</p>
</blockquote>
</li>
<li>逻辑运算</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">布尔运算：真，假</span><br><span class="line">与运算：真 &amp;&amp; 真 = 真</span><br><span class="line">        真 &amp;&amp; 假 = 假</span><br><span class="line">        假 &amp;&amp; 真 = 假</span><br><span class="line">        假 &amp;&amp; 假 = 假</span><br><span class="line">或运算：真 || 真 = 真</span><br><span class="line">  真 || 假 = 真</span><br><span class="line">  假 || 真 = 真</span><br><span class="line">  假 || 假 = 假</span><br><span class="line">非运算：！真=假</span><br><span class="line">        ！假=真</span><br></pre></td></tr></table></figure>

<h3 id="bash编程之条件测试语句"><a href="#bash编程之条件测试语句" class="headerlink" title="bash编程之条件测试语句"></a>bash编程之条件测试语句</h3><h4 id="bash条件测试"><a href="#bash条件测试" class="headerlink" title="bash条件测试"></a>bash条件测试</h4><p><strong>整型测试</strong>：整数比较</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">例如 [ $num1 -gt $num2 ]</span><br><span class="line"></span><br><span class="line">-gt: 大于则为真</span><br><span class="line">-lt: 小于则为真</span><br><span class="line">-ge: 大于等于则为真</span><br><span class="line">-le: 小于等于则为真</span><br><span class="line">-eq: 等于则为真</span><br><span class="line">-ne: 不等于则为真</span><br></pre></td></tr></table></figure>

<p><strong>字符测试</strong>：字符串比较</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">双目：</span><br><span class="line">例如[[ &quot;$str1&quot; &gt; &quot;$str2&quot; ]]</span><br><span class="line"></span><br><span class="line">&gt;: 大于则为真</span><br><span class="line">&lt;: 小于则为真</span><br><span class="line">&gt;=：大于等于则为真</span><br><span class="line">&lt;=：小于等于则为真</span><br><span class="line">==：等于则为真</span><br><span class="line">!=：不等于则为真</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">单目：</span><br><span class="line">-n String: 是否不空，不空则为真，空则为假</span><br><span class="line">-z String: 是否为空，空则为真，不空则假</span><br><span class="line"></span><br><span class="line">文件测试：判断文件的存在性及属性等</span><br><span class="line"></span><br><span class="line">-a FILE：存在则为真；否则则为假；</span><br><span class="line">-e FILE: 存在则为真；否则则为假；</span><br><span class="line">-f FILE: 存在并且为普通文件，则为真；否则为假；</span><br><span class="line">-d FILE: 存在并且为目录文件，则为真；否则为假；</span><br><span class="line">-L/-h FILE: 存在并且为符号链接文件，则为真；否则为假；</span><br><span class="line">-b: 存在并且为块设备，则为真；否则为假；</span><br><span class="line">-c: 存在并且为字符设备，则为真；否则为假</span><br><span class="line">-S: 存在并且为套接字文件，则为真；否则为假</span><br><span class="line">-p: 存在并且为命名管道，则为真；否则为假</span><br><span class="line">-s FILE: 存在并且为非空文件则为值，否则为假；</span><br><span class="line">-r FILE：文件可读为真，否则为假</span><br><span class="line">-w FILE：文件可写为真，否则为假</span><br><span class="line">-x FILE：文件可执行为真，否则为假</span><br><span class="line">file1 -nt file2: file1的mtime新于file2则为真，否则为假；</span><br><span class="line">file1 -ot file2：file1的mtime旧于file2则为真，否则为假；</span><br><span class="line"></span><br><span class="line">组合条件测试：在多个条件间实现逻辑运算</span><br><span class="line"></span><br><span class="line">与：[ condition1 -a condition2 ]</span><br><span class="line">  condition1 &amp;&amp; condition2</span><br><span class="line">或：[ condition1 -o condition2 ]</span><br><span class="line">  condition1 || condition2</span><br><span class="line">非：[ -not condition ]</span><br><span class="line">  ! condition</span><br><span class="line">与：COMMAND1 &amp;&amp; COMMAND2</span><br><span class="line">COMMAND1如果为假，则COMMAND2不执行</span><br><span class="line">或：COMMAND1 || COMMAND2</span><br><span class="line">COMMAND1如果为真，则COMMAND2不执行</span><br><span class="line">非：! COMMAND</span><br></pre></td></tr></table></figure>

<p><strong>条件测试之if语句</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">1、if语句之单分支</span><br><span class="line">语句结构：</span><br><span class="line">if 测试条件;then</span><br><span class="line">   选择分支</span><br><span class="line">fi</span><br><span class="line">表示条件测试状态返回值为值，则执行选择分支</span><br><span class="line">例：写一个脚本，接受一个参数，这个参数是用户名；如果此用户不存在，则创建该用户；</span><br><span class="line"></span><br><span class="line">#！/bin/bash</span><br><span class="line">if ! id $1 &amp;&gt; /dev/null;then</span><br><span class="line">  useradd $1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">2、if语句之双分支</span><br><span class="line">语句结构：</span><br><span class="line">if 测试条件;then</span><br><span class="line">   选择分支1</span><br><span class="line">else</span><br><span class="line">   选择分支2</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">两个分支仅执行其中之一</span><br><span class="line">例：通过命令行给定一个文件路径，而后判断：如果此文件中存在空白行，则显示其空白行的总数；否则，则显示无空白行；</span><br><span class="line">#！/bin/bash</span><br><span class="line">if grep &quot;^[[:space]]*$&quot; $1 &amp;&gt; /dev/null; then</span><br><span class="line">  echo &quot;$1 has $(grep &quot;^[[:space]]*$&quot; $1 | wc -l) blank lines.&quot;</span><br><span class="line">else</span><br><span class="line">  echo &quot;No blank lines&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">注意：如果把命令执行成功与否当作条件，则if语句后必须只跟命令本身，而不能引用。</span><br><span class="line"></span><br><span class="line">3、if语句之多分支</span><br><span class="line">语句结构：</span><br><span class="line">if 条件1;then</span><br><span class="line">     分支1</span><br><span class="line">elif 条件2;then</span><br><span class="line">     分支2</span><br><span class="line">elif 条件3;then</span><br><span class="line">     分支3</span><br><span class="line">      ...</span><br><span class="line">else</span><br><span class="line">     分支n</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">例：传递一个用户名给脚本：如果此用户的id号为0，则显示说这是管理员；如果此用户的id号大于等于500，则显示说这是普通用户；否则，则说这是系统用户。</span><br><span class="line">#!/bin/bash</span><br><span class="line">if [ $# -lt 1 ]; then</span><br><span class="line">  echo &quot;Usage: `basename $0` username&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line">if ! id -u $1 &amp;&gt; /dev/null; then</span><br><span class="line">  echo &quot;Usage: `basename $0` username&quot;</span><br><span class="line">  echo &quot;No this user $1.&quot;</span><br><span class="line">  exit 2</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ $(id -u $1) -eq 0 ]; then</span><br><span class="line">  echo &quot;Admin&quot;</span><br><span class="line">elif [ $(id -u $1) -ge 500 ]; then</span><br><span class="line">  echo &quot;Common user.&quot;</span><br><span class="line">else</span><br><span class="line">  echo &quot;System user.&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>


<p><strong>bash交互式编程</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">read [option] “prompt”-p:直接指定一个变量接受参数</span><br><span class="line">-t timaout：指定等待接受参数的时间</span><br><span class="line">-n:表示不换行</span><br><span class="line"></span><br><span class="line">例：输入用户名，可返回其shell</span><br><span class="line"></span><br><span class="line">#!/bin/bash</span><br><span class="line">read -p &quot;Plz input a username: &quot; userName</span><br><span class="line">if id $userName &amp;&gt; /dev/null; then</span><br><span class="line">    echo &quot;The shell of $userName is `grep &quot;^$userName\&gt;&quot; /etc/passwd | cut -d: -f7`.&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;No such user. stupid.&quot;</span><br><span class="line">fi    </span><br></pre></td></tr></table></figure>

<p><strong>条件测试之case语句</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">case语句：有多个测试条件时，case语句会使得语法结构更明晰</span><br><span class="line">语句结构：</span><br><span class="line"></span><br><span class="line">case 变量引用 in</span><br><span class="line">PATTERN1)</span><br><span class="line">  分支1</span><br><span class="line">;;</span><br><span class="line">PATTERN2)</span><br><span class="line">  分支2</span><br><span class="line">;;</span><br><span class="line">...</span><br><span class="line">*)</span><br><span class="line">  分支n</span><br><span class="line">;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p><strong>PATTERN：类同于文件名通配机制，但支持使用|表示或者</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"> a|b:  a或者b*：匹配任意长度的任意字符</span><br><span class="line">?: 匹配任意单个字符</span><br><span class="line">[]: 指定范围内的任意单个字符</span><br><span class="line"></span><br><span class="line">例：写一个脚本，完成如下任务，其使用形式如下所示：</span><br><span class="line">script.sh &#123;start|stop|restart|status&#125;</span><br><span class="line"></span><br><span class="line">其中：如果参数为空，则显示帮助信息，并退出脚本；</span><br><span class="line">如果参数为start，则创建空文件/var/lock/subsys/script，并显示“starting script successfully.”</span><br><span class="line">如果参数为stop，则删除文件/var/lock/subsys/script，并显示“Stop script successfully.”</span><br><span class="line">如果参数为restart，则删除文件/var/locksubsys/script并重新创建，而后显示“Restarting script successfully.”</span><br><span class="line">如果参数为status，那么：如果文件/var/lock/subsys/script存在，则显示“Script is running…”，否则，则显示“Script is stopped.”</span><br><span class="line"></span><br><span class="line">#!/bin/bash</span><br><span class="line">file=&#x27;/var/lock/subsys/script&#x27;</span><br><span class="line">case $1 in</span><br><span class="line">start)</span><br><span class="line">  if [ -f $file ];then</span><br><span class="line">  echo &quot;Script is running...&quot;</span><br><span class="line">    exit 3</span><br><span class="line">  else</span><br><span class="line">  touch $file</span><br><span class="line">  [ $? -eq 0 ] &amp;&amp; echo &quot;Starting script successfully.&quot;</span><br><span class="line">  fi</span><br><span class="line">  ;;</span><br><span class="line">stop)</span><br><span class="line">  if [ -f $file ];then</span><br><span class="line">  rm -rf $file</span><br><span class="line">  [ $? -eq 0 ] &amp;&amp; echo &quot;Stop script successfully.&quot;</span><br><span class="line">  else</span><br><span class="line">  echo &quot;Script is stopped...&quot;</span><br><span class="line">  exit 4</span><br><span class="line">  fi</span><br><span class="line">  ;;</span><br><span class="line">restart)</span><br><span class="line">  if [ -f $file ];then</span><br><span class="line">  rm -rf $file</span><br><span class="line">  [ $? -eq 0 ] &amp;&amp; echo &quot;Stop script successfully&quot;</span><br><span class="line">  else </span><br><span class="line">  echo &quot;Script is stopped...&quot;</span><br><span class="line">  exit 5</span><br><span class="line">  fi</span><br><span class="line">  touch $file</span><br><span class="line">  [ $? -eq 0 ] &amp;&amp; echo &quot;Starting script successfully&quot;</span><br><span class="line">  ;;</span><br><span class="line">status)</span><br><span class="line">  if [ -f $file ];then</span><br><span class="line">  echo &quot;Script is running...&quot;</span><br><span class="line">  else</span><br><span class="line">  echo &quot;Script is stopped.&quot;</span><br><span class="line">  fi</span><br><span class="line">  ;;</span><br><span class="line">*)</span><br><span class="line">  echo &quot;`basename $0` &#123;start|stop|restart|status&#125;&quot;</span><br><span class="line">  exit 2</span><br><span class="line">  ;;</span><br><span class="line"> esac</span><br></pre></td></tr></table></figure>


<h4 id="bash编程之循环语句"><a href="#bash编程之循环语句" class="headerlink" title="bash编程之循环语句"></a>bash编程之循环语句</h4><p><strong>循环之for循环</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">1、for语句格式一</span><br><span class="line">语句结构：</span><br><span class="line">for 变量名 in 列表; do</span><br><span class="line">    循环体</span><br><span class="line">done</span><br><span class="line">列表：可包含一个或多个元素</span><br><span class="line">循环体：依赖于调用变量来实现其变化</span><br><span class="line">循环可嵌套</span><br><span class="line">退出条件：遍历元素列表结束</span><br><span class="line">例：求100以内所有正整数之和</span><br><span class="line"></span><br><span class="line">#!/bin/bash</span><br><span class="line">declare -i sum=0</span><br><span class="line">for i in &#123;1..100&#125;; do</span><br><span class="line">    let sum+=$i</span><br><span class="line">done</span><br><span class="line">echo $sum</span><br><span class="line"></span><br><span class="line">2、for语句格式二</span><br><span class="line">for ((初始条件;测试条件;修改表达式)); do</span><br><span class="line">      循环体</span><br><span class="line">done</span><br><span class="line">先用初始条件和测试条件做判断，如果符合测试条件则执行循环体，再修改表达式，否则直接跳出循环。</span><br><span class="line"></span><br><span class="line">例：求100以内所有正整数之和（for二实现）</span><br><span class="line">#!/bin/bash</span><br><span class="line">declare -i sum=0</span><br><span class="line">for ((counter=1;$counter &lt;= 100; counter++)); do</span><br><span class="line">  let sum+=$counter</span><br><span class="line">done</span><br><span class="line">echo $sum</span><br></pre></td></tr></table></figure>

<p><strong>循环之while语句</strong></p>
<p>while适用于循环次数未知，或不便用for直接生成较大的列表时</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">语句结构：</span><br><span class="line">while 测试条件; do</span><br><span class="line">  循环体</span><br><span class="line">done</span><br><span class="line">测试条件为真，进入循环；测试条件为假，退出循环</span><br><span class="line">例1：求100以内所有偶数之和，要求使用取模方法</span><br><span class="line">#!/bin/bash</span><br><span class="line">declare -i counter=1</span><br><span class="line">declare -i sum=0</span><br><span class="line">while [ $counter -le 100 ]; do</span><br><span class="line">  if [ $[$counter%2] -eq 0 ]; then</span><br><span class="line">     let sum+=$counter</span><br><span class="line">  fi</span><br><span class="line">  let counter++</span><br><span class="line"> done</span><br><span class="line">echo $sum</span><br><span class="line"></span><br><span class="line">例2：提示用户输入一个用户名，如果用户存在，就显示用户的ID号和shell；否则显示用户不存在；显示完成之后不退出，再次重复前面的操作，直到用户输入q或quit为止</span><br><span class="line">#!/bin/bash</span><br><span class="line">read -p &quot;Plz enter a username: &quot; userName</span><br><span class="line">while [ &quot;$userName&quot; != &#x27;q&#x27; -a &quot;$userName&quot; != &#x27;quit&#x27; ]; do</span><br><span class="line">  if id $userName &amp;&gt; /dev/null; then</span><br><span class="line">     grep &quot;^$userName\&gt;&quot; /etc/passwd | cut -d: -f3,7</span><br><span class="line">  else</span><br><span class="line">    echo &quot;No such user.&quot;</span><br><span class="line">  fi</span><br><span class="line">read -p &quot;Plz enter a username again: &quot; userName</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">while特殊用法：遍历文本文件</span><br><span class="line">语句结构：</span><br><span class="line">while read 变量名; do</span><br><span class="line">  循环体</span><br><span class="line">done &lt; /path/to/somefile</span><br><span class="line">变量名，每循环一次，记忆了文件中一行文本</span><br><span class="line"></span><br><span class="line">例：显示ID号为偶数，且ID号同GID的用户的用户名、ID和SHELL</span><br><span class="line">while read line; do</span><br><span class="line">  userID=`echo $line | cut -d: -f3`</span><br><span class="line">  groupID=`echo $line | cut -d: -f4`</span><br><span class="line">  if [ $[$userID%2] -eq 0 -a $userID -eq $groupID ]; then</span><br><span class="line">     echo $line | cut -d: -f1,3,7</span><br><span class="line">  fi</span><br><span class="line">done &lt; /etc/passwd</span><br></pre></td></tr></table></figure>

<p><strong>循环之until语句</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">语句结构：</span><br><span class="line">until 测试条件; do</span><br><span class="line">      循环体</span><br><span class="line">done</span><br><span class="line">测试条件为假，进入循环；测试条件为真，退出循环</span><br><span class="line"></span><br><span class="line">例：求100以内所有偶数之和，要求使用取模方法（until实现）</span><br><span class="line"></span><br><span class="line">#!/bin/bash</span><br><span class="line">declare -i counter=1</span><br><span class="line">declare -i sum=0</span><br><span class="line">until [ $counter -gt 100 ]; do</span><br><span class="line">  if [ $[$counter%2] -eq 0 ]; then</span><br><span class="line">     let sum+=$counter</span><br><span class="line">  fi</span><br><span class="line">  let counter++</span><br><span class="line">done</span><br><span class="line">echo $sum</span><br><span class="line">例：提示用户输入一个用户名，如果用户存在，就显示用户的ID号和shell；否则显示用户不存在；显示完成之后不退出，再次重复前面的操作，直到用户输入q或quit为止（until实现）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#!/bin/bash</span><br><span class="line">read -p &quot;Plz enter a username: &quot; userName</span><br><span class="line">until [ &quot;$userName&quot; = &#x27;q&#x27; -a &quot;$userName&quot; = &#x27;quit&#x27; ]; do</span><br><span class="line">  if id $userName &amp;&gt; /dev/null; then</span><br><span class="line">   grep &quot;^$userName\&gt;&quot; /etc/passwd | cut -d: -f3,7</span><br><span class="line">else</span><br><span class="line">echo &quot;No such user.&quot;</span><br><span class="line">fi</span><br><span class="line">read -p &quot;Plz enter a username again: &quot; userName</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p><strong>循环之循环控制和shift</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">循环控制命令：</span><br><span class="line">break：提前退出循环</span><br><span class="line">break [N]: 退出N层循环；N省略时表示退出break语句所在的循环</span><br><span class="line">continue: 提前结束本轮循环，而直接进入下轮循环</span><br><span class="line">continue [N]：提前第N层的循环的本轮循环，而直接进入下轮循环</span><br></pre></td></tr></table></figure>

<p><strong>死循环：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#while体while true; do</span><br><span class="line">      循环体</span><br><span class="line">done</span><br><span class="line">#until体</span><br><span class="line">until false; do</span><br><span class="line">      循环体</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">例1：写一个脚本，判断给定的用户是否登录了当前系统</span><br><span class="line">(1) 如果登录了，则脚本终止；</span><br><span class="line">(2) 每5秒种，查看一次用户是否登录；</span><br><span class="line">#!/bin/bash</span><br><span class="line">while true; do</span><br><span class="line">    who | grep &quot;gentoo&quot; &amp;&gt; /dev/null</span><br><span class="line">    if [ $? -eq 0 ];then</span><br><span class="line">break</span><br><span class="line">    fi</span><br><span class="line">    sleep 5</span><br><span class="line">done</span><br><span class="line">echo &quot;gentoo is logged.&quot;</span><br></pre></td></tr></table></figure>

<p><strong>shift：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">如果没有数字，只有shift 就是跳过一个参数获取下一个参数，如果加上数字，比如shift 2 ，跳过两个参数获取下一个参数。</span><br><span class="line">例：写一个脚本，使用形式如下所示    </span><br><span class="line">showifinfo.sh [-i INTERFACE|-a] [-v]</span><br><span class="line">要求：</span><br><span class="line">1、-i或-a不可同时使用，-i用于指定特定网卡接口，-a用于指定所有接口；</span><br><span class="line">显示接口的ip地址</span><br><span class="line">2、使用-v，则表示显示详细信息，显示接口的ip地址、子网掩码、广播地址；</span><br><span class="line">3、默认表示仅使用-a选项;</span><br><span class="line"></span><br><span class="line">#!/bin/bash</span><br><span class="line">allinterface=0</span><br><span class="line">ifflag=0</span><br><span class="line">verbose=0</span><br><span class="line">interface=0</span><br><span class="line">if [ $# -eq 0 ];then</span><br><span class="line">  ifconfig | grep &quot;inet addr:&quot; | awk &#x27;&#123;print $2&#125;&#x27;</span><br><span class="line">fi</span><br><span class="line">while [ $# -ge 1 ];do</span><br><span class="line">  case $1 in </span><br><span class="line">-a)</span><br><span class="line"> allinterface=1</span><br><span class="line"> shift 1</span><br><span class="line">  ;;</span><br><span class="line">-i)</span><br><span class="line">  ifflag=1</span><br><span class="line">  interface=$2</span><br><span class="line">  shift 2</span><br><span class="line">  ;;</span><br><span class="line">-v)</span><br><span class="line">  verbose=1</span><br><span class="line">  shift 1</span><br><span class="line">  ;;</span><br><span class="line">  *)</span><br><span class="line">echo &quot;error option&quot;</span><br><span class="line">exit 2</span><br><span class="line">  ;;</span><br><span class="line">  esac</span><br><span class="line">done</span><br><span class="line">if [ $allinterface -eq 1 ];then</span><br><span class="line">  if [ $ifflag -eq 1 ];then</span><br><span class="line">   echo &quot;command not found&quot;</span><br><span class="line">    exit 5</span><br><span class="line">  fi</span><br><span class="line">  if [ $verbose -eq 1 ];then</span><br><span class="line">    ifconfig | grep &quot;inet addr:&quot;</span><br><span class="line">  else</span><br><span class="line">    ifconfig | grep &quot;inet addr:&quot; | awk &#x27;&#123;print $2&#125;&#x27;</span><br><span class="line">  fi</span><br><span class="line">fi</span><br><span class="line">if [ $ifflag -eq 1 ];then</span><br><span class="line">  if [ $allinterface -eq 1 ];then</span><br><span class="line">        echo &quot;command not found&quot;</span><br><span class="line">        exit 5</span><br><span class="line">  fi</span><br><span class="line"> if [ $verbose -eq 1 ];then</span><br><span class="line">    ifconfig $interface | grep &quot;inet addr:&quot;</span><br><span class="line">  else</span><br><span class="line">    ifconfig $interface | grep &quot;inet addr:&quot; | awk &#x27;&#123;print $2&#125;&#x27;</span><br><span class="line">  fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h3 id="bash编程之函数"><a href="#bash编程之函数" class="headerlink" title="bash编程之函数"></a>bash编程之函数</h3><h4 id="语法结构："><a href="#语法结构：" class="headerlink" title="语法结构："></a>语法结构：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function F_NAME &#123;    </span><br><span class="line">   函数体</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  F_NAME() &#123;</span><br><span class="line">    函数体</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>可调用：使用函数名，函数名出现的地方，会被自动替换为函数<br>函数的返回值：<br>函数的执行结果返回值：代码的输出<br>函数中使用打印语句：echo, printf<br>函数中调用的系统命令执行后返回的结果<br>执行状态返回值：<br>默认取决于函数体执行的最后一个命令状态结果<br>自定义退出状态码：return [0-255]</p>
<blockquote>
<p>注意：函数体运行时，一旦遇到return语句，函数即返回；</p>
</blockquote>
<p><strong>函数可以接受参数：</strong><br>在函数体中调用函数参数的方式同脚本中调用脚本参数的方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">位置参数</span><br><span class="line">$1, $2, …</span><br><span class="line">$#, $*, $@</span><br></pre></td></tr></table></figure>

<p>例：写一个脚本，完成如下功能(使用函数)：</p>
<p>1、提示用户输入一个可执行命令；</p>
<p>2、获取这个命令所依赖的所有库文件(使用ldd命令)；</p>
<p>3、复制命令至/mnt/sysroot/对应的目录中</p>
<p>解释：假设，如果复制的是cat命令，其可执行程序的路径是/bin/cat，那么就要将/bin/cat复到/mnt/sysroot/bin/目录中，如果复制的是useradd命令，而useradd的可执行文件路径为/usr/sbin/useradd，那么就要将其复制到/mnt/sysroot/usr/sbin/目录中；</p>
<p>4、复制各库文件至/mnt/sysroot/对应的目录中；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">target=/mnt/sysroot/</span><br><span class="line">[ -d $target ] || mkdir $target</span><br><span class="line">preCommand() &#123;</span><br><span class="line">    if which $1 &amp;&gt; /dev/null; then</span><br><span class="line">  commandPath=`which --skip-alias $1`</span><br><span class="line">  return 0</span><br><span class="line">    else</span><br><span class="line">  echo &quot;No such command.&quot;</span><br><span class="line">  return 1</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">commandCopy() &#123;</span><br><span class="line">    commandDir=`dirname $1`</span><br><span class="line">    [ -d $&#123;target&#125;$&#123;commandDir&#125; ] || mkdir -p $&#123;target&#125;$&#123;commandDir&#125;</span><br><span class="line">    [ -f $&#123;target&#125;$&#123;commandPath&#125; ] || cp $1 $&#123;target&#125;$&#123;commandDir&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">libCopy() &#123;</span><br><span class="line">    for lib in `ldd $1 | egrep -o &quot;/[^[:space:]]+&quot;`; do</span><br><span class="line">libDir=`dirname $lib`</span><br><span class="line">[ -d $&#123;target&#125;$&#123;libDir&#125; ] || mkdir -p $&#123;target&#125;$&#123;libDir&#125;</span><br><span class="line">[ -f $&#123;target&#125;$&#123;lib&#125; ] || cp $lib $&#123;target&#125;$&#123;libDir&#125;</span><br><span class="line">    done</span><br><span class="line">&#125; </span><br><span class="line">read -p &quot;Plz enter a command: &quot; command</span><br><span class="line"></span><br><span class="line">until [ &quot;$command&quot; == &#x27;quit&#x27; ]; do</span><br><span class="line"></span><br><span class="line">  if preCommand $command &amp;&gt; /dev/null; then</span><br><span class="line">    commandCopy $commandPath</span><br><span class="line">    libCopy $commandPath</span><br><span class="line">  fi</span><br><span class="line"></span><br><span class="line">  read -p &quot;Plz enter a command: &quot; command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h4 id="bash编程之信号捕捉"><a href="#bash编程之信号捕捉" class="headerlink" title="bash编程之信号捕捉"></a>bash编程之信号捕捉</h4><p>trap命令用于在shell程序中捕捉到信号，之后可以有三种反应方式：</p>
<ul>
<li>(1)执行一段程序来处理这一信号</li>
<li>(2)接受信号的默认操作</li>
<li>(3)忽视这一信号</li>
</ul>
<p>trap对上面三种方式提供了三种基本形式：</p>
<p>第一种形式的trap命令在shell接收到signal list清单中数值相同的信号时，将执行双引号中的命令串。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trap &#x27;commands&#x27; signal-list</span><br><span class="line">trap &quot;commands&quot; signal-list</span><br></pre></td></tr></table></figure>

<p>第二种形式的trap命令恢复信号的默认操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trap signal-list</span><br></pre></td></tr></table></figure>

<p>第三种形式的trap命令允许忽视信号：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trap &quot; &quot; signal-list</span><br><span class="line">trap &#x27;COMMAND&#x27; SIGINT（表示关闭进程）</span><br></pre></td></tr></table></figure>

<p>例：写一个脚本，能够ping探测指定网络内的所有主机是否在线,当没有执行完时可接收ctrl+c命令退出。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#!/bin/bash</span><br><span class="line">quitScript() &#123;</span><br><span class="line">   echo &quot;Quit...&quot;</span><br><span class="line">&#125;    </span><br><span class="line">trap &#x27;quitScript; exit 5&#x27; SIGINT</span><br><span class="line"></span><br><span class="line">cnetPing() &#123;</span><br><span class="line">  for i in &#123;1..254&#125;; do</span><br><span class="line">    if ping -c 1 -W 1 $1.$i &amp;&gt; /dev/null; then</span><br><span class="line">      echo &quot;$1.$i is up.&quot;</span><br><span class="line">     else</span><br><span class="line">      echo &quot;$1.$i is down.&quot;</span><br><span class="line">    fi</span><br><span class="line">    done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bnetPing() &#123;</span><br><span class="line">  for j in &#123;0..255&#125;; do</span><br><span class="line">    cnetPing $1.$j </span><br><span class="line">  done</span><br><span class="line">&#125;</span><br><span class="line">anetPing() &#123;</span><br><span class="line">for m in &#123;0..255&#125;; do</span><br><span class="line">bnetPing $1.$m</span><br><span class="line">done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">netType=`echo $1 | cut -d&quot;.&quot; -f1`</span><br><span class="line"></span><br><span class="line">if [ $netType -ge 1 -a $netType -le 126 ]; then</span><br><span class="line">anetPing $netType</span><br><span class="line">elif [ $netType -ge 128 -a $netType -le 191 ]; then</span><br><span class="line">bnetPing $(echo $1 | cut -d&#x27;.&#x27; -f1,2)</span><br><span class="line">elif [ $netType -ge 192 -a $netType -le 223 ]; then</span><br><span class="line">cnetPing $(echo $1 | cut -d&#x27;.&#x27; -f1-3)</span><br><span class="line">else</span><br><span class="line">echo &quot;Wrong&quot;</span><br><span class="line">exit 2</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h3 id="bash编程之数组"><a href="#bash编程之数组" class="headerlink" title="bash编程之数组"></a>bash编程之数组</h3><p><strong>数组</strong>：连续的多个独立内存空间，每个内存空间相当于一个变量<br><strong>数组元素</strong>：数组名+索引（从0开始编号）<br><strong>索引的表示方式</strong>：a[0], a[1]<br><strong>声明数组</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare -a ARRAR_NAME</span><br></pre></td></tr></table></figure>
<p><strong>关联数组</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare -A ARRAY_NAME</span><br></pre></td></tr></table></figure>

<p>支持稀疏格式：仅一维数组  </p>
<p>数组元素的赋值：</p>
<p>(1) 一次只赋值一个元素</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a[0]=$RANDOM</span><br></pre></td></tr></table></figure>

<p>(2) 一次赋值全部元素</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a=(red blue yellow green)</span><br></pre></td></tr></table></figure>

<p>(3) 指定索引进行赋值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a=([0]=green [3]=red [2]=blue [6]=yellow)</span><br></pre></td></tr></table></figure>

<p>(4) 用户输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">read -a ARRAY</span><br></pre></td></tr></table></figure>

<p><strong>数组的访问</strong>：<br><strong>用索引访问</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ARRAY[index]</span><br></pre></td></tr></table></figure>
<p><strong>数组的长度</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$&#123;#ARRAY[*]&#125;</span><br><span class="line">$&#123;#ARRAY[@]&#125;</span><br></pre></td></tr></table></figure>
<p>例：写一个脚本，生成10个随机数，保存至数组中；而后显示数组下标为偶数的元素</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#！/bin/bash</span><br><span class="line">for i in &#123;0..9&#125;; do</span><br><span class="line">    rand[$i]=$RANDOM</span><br><span class="line">    [ $[$i%2] -eq 0 ] &amp;&amp; echo &quot;$i:$&#123;rand[$i]&#125;&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p><strong>从数组中挑选某元素</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;ARRAY[@]:offset:number&#125;</span><br></pre></td></tr></table></figure>

<p><strong>切片</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">offset: 偏移的元素个数</span><br><span class="line">number: 取出的元素的个数</span><br><span class="line">$&#123;ARRAY[@]:offset&#125;：取出偏移量后的所有元素</span><br><span class="line">$&#123;ARRAY[@]&#125;: 取出所有元素</span><br></pre></td></tr></table></figure>

<p><strong>数组复制</strong>：要使用${ARRAY[@]}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$@: 每个参数是一个独立的串</span><br><span class="line">$*: 所有参数是一个串</span><br></pre></td></tr></table></figure>
<p><strong>向数组中追加元素</strong>：非稀疏格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">week, </span><br><span class="line">week[$&#123;#week[@]&#125;]</span><br></pre></td></tr></table></figure>

<p><strong>从数组中删除元素</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unset ARRAY[index]</span><br></pre></td></tr></table></figure>

<p>例：复制一个数组中下标为偶数的元素至一个新数组中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">declare -a mylogs</span><br><span class="line">logs=(/var/log/*.log)</span><br><span class="line">echo $&#123;logs[@]&#125;</span><br><span class="line">for i in `seq 0 $&#123;#logs[@]&#125;`; do</span><br><span class="line">  if [ $[$i%2] -eq 0 ];then</span><br><span class="line">    index=$&#123;#mylogs[@]&#125;</span><br><span class="line">     mylogs[$index]=$&#123;logs[$i]&#125;</span><br><span class="line">  fi</span><br><span class="line">done</span><br><span class="line">echo $&#123;mylogs[@]&#125;</span><br></pre></td></tr></table></figure>

<p>例2：生成10个随机数，升序排序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#!/bin/bash</span><br><span class="line">for((i=0;i&lt;10;i++))</span><br><span class="line">do</span><br><span class="line">  rnd[$i]=$RANDOM</span><br><span class="line">done</span><br><span class="line">echo -e &quot;total=$&#123;#rnd[@]&#125;\n$&#123;rnd[@]&#125;\nBegin to sort&quot;</span><br><span class="line">for((i=9;i&gt;=1;i--))</span><br><span class="line">do</span><br><span class="line">        for((j=0;j&lt;i;j++))</span><br><span class="line">  do</span><br><span class="line">  if [ $&#123;rnd[$j]&#125; -gt $&#123;rnd[$[$j+1]]&#125; ] ;then</span><br><span class="line">    swapValue=$&#123;rnd[$j]&#125;</span><br><span class="line">    rnd[$j]=$&#123;rnd[$[$j+1]]&#125;</span><br><span class="line">    rnd[$[$j+1]]=$swapValue</span><br><span class="line">  fi</span><br><span class="line">  done</span><br><span class="line">done</span><br><span class="line">echo $&#123;rnd[@]&#125;</span><br></pre></td></tr></table></figure>

<p>例3：打印九九乘法表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bashfor((i=1;i&lt;=9;i++))</span><br><span class="line">do </span><br><span class="line">strLine=&quot;&quot;</span><br><span class="line">  for((j=1;i&lt;=9;j++))</span><br><span class="line">  do</span><br><span class="line">    strLine=$strLine&quot;$i*$j=&quot;$[$i*$j]&quot;\t&quot;</span><br><span class="line">    [ $i -eq $j ] &amp;&amp; echo -e $strLine &amp;&amp; break</span><br><span class="line">  done</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="bash编程之字符串操作"><a href="#bash编程之字符串操作" class="headerlink" title="bash编程之字符串操作"></a>bash编程之字符串操作</h3><p><strong>字符串切片</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$&#123;string:offset:length&#125;</span><br><span class="line">[root@scholar scripts]# string=&#x27;hello word&#x27;</span><br><span class="line">[root@scholar scripts]# echo $&#123;string:2:4&#125;</span><br><span class="line">llo</span><br><span class="line"></span><br><span class="line">取尾部的指定个数的字符：</span><br><span class="line">$&#123;string: -length&#125;</span><br><span class="line">[root@scholar scripts]# echo $&#123;string: -2&#125;</span><br><span class="line">rd</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>取子串</strong>：基于模式</p>
<ul>
<li><code>$&#123;variable#*word&#125;</code>：在variable中存储字串上，自左而右，查找第一次出现word，删除字符开始至此word处的所有内容；</li>
<li>$<code>&#123;variable##*word&#125;</code>：在variable中存储字串上，自左而右，查找最后一次出现word，删除字符开始至此word处的所有内容；<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file=&#x27;/var/log/messages&#x27;</span><br><span class="line">$&#123;file#*/&#125;: 返回的结果是var/log/messages</span><br><span class="line">$&#123;file##*/&#125;: 返回messages</span><br></pre></td></tr></table></figure></li>
<li><code>$&#123;variable%word*&#125;</code>: 在variable中存储字串上，自右而左，查找第一次出现word，删除此word处至字串尾部的所有内容；</li>
<li><code>$&#123;variable%%world*&#125;</code>:在variable中存储字串上，自右而左，查找最后一次出现word，删除此word处至字串尾部的所有内容；</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">file=&#x27;/var/log/messages&#x27;</span><br><span class="line">$&#123;file%*/&#125;: 返回的结果是/var/log</span><br><span class="line">$&#123;file%%*/&#125;: 返回结果为空</span><br><span class="line"></span><br><span class="line">例：url=&quot;http://www.redhat.com:80&quot;</span><br><span class="line">取端口：$&#123;url##*:&#125;</span><br><span class="line">取协议：$&#123;url%%:*&#125;</span><br></pre></td></tr></table></figure>

<p><strong>查找替换</strong>：</p>
<ul>
<li><code>$&#123;variable/pattern/substi&#125;</code>: 替换第一次出现</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#userinfo=`tail -1 /etc/passwd</span><br><span class="line">#echo $userinfo</span><br><span class="line">scholar:x:500:500:scholar:/home/scholar:/bin/bash</span><br><span class="line">#echo $&#123;userinfo/scholar/redhat&#125;</span><br><span class="line">redhat:x:500:500:scholar:/home/scholar:/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li><code>$&#123;variable//pattern/substi&#125;</code>：替换所有的出现</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#echo $&#123;userinfo//scholar/redhat&#125;</span><br><span class="line">redhat:x:500:500:redhat:/home/redhat:/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li><code>$&#123;variable/#pattern/substi&#125;</code>：替换行首被pattern匹配到的内容</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#echo $&#123;userinfo/#scholar/redhat&#125;</span><br><span class="line">redhat:x:500:500:scholar:/home/scholar:/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li><code>$&#123;variable/%pattern/substi&#125;</code>：替换行尾被pattern匹配到的内容</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#echo $&#123;userinfo/%bash/redhat&#125;</span><br><span class="line">scholar:x:500:500:scholar:/home/scholar:/bin/redhat</span><br></pre></td></tr></table></figure>


<h4 id="pattern可以使用globbing中的元字符：-？"><a href="#pattern可以使用globbing中的元字符：-？" class="headerlink" title="pattern可以使用globbing中的元字符：* ？"></a>pattern可以使用globbing中的元字符：<code>* ？</code></h4><p><strong>查找删除</strong>：</p>
<ul>
<li><code>$&#123;variable/pattern&#125;</code>：删除第一次出现</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#echo $&#123;userinfo/scholar&#125;</span><br><span class="line">:x:500:500:scholar:/home/scholar:/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li><code>$&#123;variable//pattern&#125;</code>：删除所有的出现</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#echo $&#123;userinfo//scholar&#125;</span><br><span class="line">:x:500:500::/home/:/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li><code>$&#123;variable/#pattern&#125;</code>：删除行首被pattern匹配到的内容</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#echo $&#123;userinfo/#scholar&#125;</span><br><span class="line">:x:500:500:scholar:/home/scholar:/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li><code>$&#123;variable/%pattern&#125;</code>：删除行尾被pattern匹配到的内容</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#echo $&#123;userinfo/%bash&#125;</span><br><span class="line">scholar:x:500:500:scholar:/home/scholar:/bin/</span><br></pre></td></tr></table></figure>

<p><strong>大小写转换</strong>：</p>
<p>小–&gt;大：<code>$&#123;variable^^&#125;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#echo $&#123;userinfo^^&#125;</span><br><span class="line">SCHOLAR:X:500:500:SCHOLAR:/HOME/SCHOLAR:/BIN/BASH</span><br></pre></td></tr></table></figure>

<p>大–&gt;小：<code>$&#123;variable,,&#125;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#name=&quot;SCHOLAR&quot;</span><br><span class="line">#echo $&#123;name,,&#125;</span><br><span class="line">scholar</span><br></pre></td></tr></table></figure>

<h4 id="变量赋值操作："><a href="#变量赋值操作：" class="headerlink" title="变量赋值操作："></a>变量赋值操作：</h4><ul>
<li><code>$&#123;variable:-string&#125;</code>:variable为空或未设定，那么返回string，否则，返回variable变量的值；</li>
<li><code>$&#123;variable:=string&#125;</code>:variable为空或未设定，则返回string，且将string赋值给变量variable，否则，返回variable的值；</li>
</ul>
<p>为脚本使用配置文件，并确保某变量有可用值的方式</p>
<p><code>variable=$&#123;variable:-default vaule&#125;</code></p>
<p>写个脚本，配置etc目录；</p>
<ul>
<li>(1) 在配置文件中定义变量；</li>
<li>(2) 在脚本中source配置文件；</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">[ -f /etc/sysconfig/network ] &amp;&amp; source /etc/network/network</span><br><span class="line">[-z &quot;$HOSTAME&quot; -o &quot;$HOSTNAME&quot; = &#x27;(none)&#x27; ] || HOSTNAME =&#x27;localhost&#x27;</span><br><span class="line">/bin/hostname $HOSTNAME</span><br><span class="line">/bin/hostname</span><br></pre></td></tr></table></figure>

<h4 id="mktemp命令："><a href="#mktemp命令：" class="headerlink" title="mktemp命令："></a>mktemp命令：</h4><p>mktemp [OPTIONS] filename.XXX</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-d: 创建临时目录</span><br><span class="line">--tmpdir=/path/to/somewhere ：指定临时文件所在的目录</span><br><span class="line"></span><br><span class="line">mktemp /tmp/tmp.XXX                    #XXX生成相同数量随机字符</span><br><span class="line">mktemp --tmpdir=/var/tmp tmp.XXX       #指定目录创建临时文件</span><br><span class="line">mktemp --tmpdir=/var/tmp -d tmp.XXX    #指定目录创建临时目录</span><br></pre></td></tr></table></figure>


<h4 id="install命令"><a href="#install命令" class="headerlink" title="install命令:"></a>install命令:</h4><p>install [OPTIONS] SOURCE DEST<br>install [OPTIONS] SOURCE… DIR<br>install [OPTIONS] -d DIR …</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">增强型的复制命令：</span><br><span class="line">-o OWNER</span><br><span class="line">-g GROUP</span><br><span class="line">-m MODE</span><br><span class="line">-d : 创建目录</span><br><span class="line"></span><br><span class="line">install /etc/fstab /tmp                 #复制文件到指定目录</span><br><span class="line">install --mode=644 /etc/fstab /tmp/     #复制时指定权限</span><br><span class="line">install --owner=scholar /etc/fstab /tmp #复制时指定属主</span><br><span class="line">install --group=scholar /etc/fstab /tmp #复制时指定属组</span><br><span class="line">install -d /tmp/install                 #创建目录</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/01/10/%E4%B8%80%E8%A1%8C-Python-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E5%B9%B6%E8%A1%8C/" rel="prev" title="一行 Python 代码实现并行">
                  <i class="fa fa-chevron-left"></i> 一行 Python 代码实现并行
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/10/22/Explain%E8%AF%A6%E8%A7%A3%E4%B8%8E%E7%B4%A2%E5%BC%95%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" rel="next" title="Explain详解与索引最佳实践">
                  Explain详解与索引最佳实践 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lyvivian</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
