<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>正規表現 - 总有刁民想要害朕</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u6b63\u898f\u8868\u73fe";
        var mkdocs_page_input_path = "Regular-Expression.markdown";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-QXRGWVKZW2"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-QXRGWVKZW2');
      </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> 总有刁民想要害朕
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Welcome</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">ansbile</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ansbile/">ansbileオプション</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ansbile_async/">ansbile_async</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../awk/">awk</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../sed/">sed</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../MB-MiB%E7%9A%84%E5%8C%BA%E5%88%AB/">MB_MiB的区别</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">MegaRAID</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../megacli/">megacli</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../megaraid/">megaraid</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">MySQL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Explain%E8%AF%A6%E8%A7%A3%E4%B8%8E%E7%B4%A2%E5%BC%95%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">Explain详解与索引最佳实践</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mysql/">Mysql参数优化</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mysql-table/">MySQL-table</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mysql%E3%82%92%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%8B%E3%82%89%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB/">MySQLビルド</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MySQL-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mysql-ha/">mysql+keepalived搭建教程</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Python Tips</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../python-styleguide/">Python风格规范</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../python-config/">Python程序配置文件管理</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../python-decorator/">装饰器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../python-dunder/">5种下划线</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../python-function/">传入参数的几种方法</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../python/">非常规的技巧</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../python-mysql/">操作mysql基础</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Python-Re-%E6%A8%A1%E5%9D%97%E8%B6%85%E5%85%A8%E8%A7%A3%E8%AF%BB/">Re 模块</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Python%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5%E6%80%BB%E7%BB%93/">字符串拼接总结</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../%E4%B8%80%E8%A1%8C-Python-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E5%B9%B6%E8%A1%8C/">代码并行</a>
                  </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">正規表現</a>
    <ul class="current">
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../taged-VLAN%E3%81%A8untagedVLAN%E3%81%AE%E9%81%95%E3%81%84/">タグVLAN</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../sar/">sar</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Bash%E7%BC%96%E7%A8%8B%E8%B6%85%E8%AF%A6%E7%BB%86%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/">Bash编程超详细语法总结</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../iptables/">iptables</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../linux-lvm/">linux-lvm</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../centos7-set-kernel/">centos7-set-kernel</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../centos-network-device-naming/">centos-network-device-naming</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Linux-Performance/">Linux Performance</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Linux-shell-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6-%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%A6%E8%A7%A3/">Linux-shell-逻辑运算符-逻辑表达式详解</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%8F%8ALVM%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/">LVM逻辑卷基本概念及LVM的工作原理</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../macOS%E8%BD%AF%E4%BB%B6%E7%BC%96%E8%AF%91%E6%97%B6%E6%89%BE%E4%B8%8D%E5%88%B0%E5%A4%B4%E6%96%87%E4%BB%B6%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95-%E6%9B%B4%E6%96%B010-15/">macOS软件编译时找不到头文件解决方法[更新10.15]</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ubnt/">ubnt</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../vim/">VIM</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../about/">About</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">总有刁民想要害朕</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>正規表現</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <ul>
<li><a href="https://qiita.com/ikmiyabi/items/12d1127056cdf4f0eea5">元URL</a></li>
</ul>
<h1 id="regular-expression">正規表現（Regular Expression）とは？<a class="headerlink" href="#regular-expression" title="Permanent link">&para;</a></h1>
<ul>
<li>文字列をパターン化し、特殊な文字（メタキャラクタ、メタ文字）で表現したもの</li>
</ul>
<p>例えば、郵便番号を正規表現を使って表すと以下のように表現できる。</p>
<pre><code>郵便番号の正規表現
\d{3}-?\d{4}
# 3桁の数字 + ハイフン有りor無し + 4桁の数字
</code></pre>
<p>この<code>「\d」「{}」「?」</code>のような文字のことを <strong>メタキャラクタ（メタ文字）</strong> という。</p>
<h1 id="_1">正規表現の由来<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<ul>
<li>1940年代にさまざまな神経生理学者たちが、神経回路を数学的に説明するために開発した。</li>
<li>1956年、数学者 <em>Stephen Kleene（スティーブン・クリーネ）</em> が、その考え方に基づき論文を著述し、初めて正規表現の概念が紹介された。</li>
<li>ここで「正則集合の代数」を説明するために「正則表現・正規表現(regular expression)」が使用された。
何が言いたかったのかというと、元々は神経回路の研究で開発された数学的な概念だったということ。</li>
</ul>
<p>正規表現という若干分かりにくいネーミングはこのせい</p>
<p>参考：<a href="https://msdn.microsoft.com/ja-jp/library/cc427944.aspx">正規表現の由来</a></p>
<h1 id="_2">何の役に立つ？<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h1>
<ul>
<li>文字列検索に役立つ</li>
<li>grep検索、エディタやExcelの検索機能</li>
<li>→ 調査、コーディングが捗る</li>
<li>文字列置換に役立つ</li>
<li>sed、エディタやExcelの置換機能</li>
<li>→ 文字列の一括修正、一括挿入、一括削除が楽になる</li>
<li>入力された文字列が、規定されたパターン通りに入力されているかの確認（バリデーション）に役立つ</li>
<li>郵便番号、電話番号、メールアドレスなどの入力形式のチェックなど</li>
</ul>
<h1 id="_3">正規表現とワイルドカードの違い<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h1>
<p>最初の頃に正規表現とワイルドカードを勘違いしていたので確認。</p>
<p>そもそも、ワイルドカード（Wild Card）とは何か？</p>
<ul>
<li>トランプ用語で，どのカードの代用にもできるカードのこと（ポーカーにおけるジョーカーなど）</li>
<li>転じてITにおけるワイルドカードとは、 <strong>任意の文字列</strong> にマッチする特殊文字</li>
<li>OSや言語によって解釈が異なる</li>
</ul>
<h2 id="_4">ファイル検索におけるワイルドカード<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<ul>
<li>windowsやUnix/Linuxのシェルでのファイル検索では、以下のワイルドカードが使える</li>
</ul>
<table>
<thead>
<tr>
<th>ワイルドカード</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>?</td>
<td>任意の1文字にマッチ</td>
</tr>
<tr>
<td>*</td>
<td>0文字以上の任意の文字列にマッチ</td>
</tr>
</tbody>
</table>
<p><code>music.mp?</code> → 「music.mp3」「music.mp4」などにマッチ</p>
<p><code>*.txt</code> → 拡張子が.txtであるもの全てにマッチ</p>
<h2 id="sql">SQLにおけるワイルドカード<a class="headerlink" href="#sql" title="Permanent link">&para;</a></h2>
<ul>
<li>SQLのWHERE句におけるLIKE演算子では、以下のワイルドカードが使える</li>
</ul>
<table>
<thead>
<tr>
<th>ワイルドカード</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>%</td>
<td>0文字以上の任意の文字列にマッチ</td>
</tr>
<tr>
<td>_</td>
<td>任意の１文字にマッチ</td>
</tr>
</tbody>
</table>
<h1 id="_5">メタキャラクタとは？<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h1>
<ul>
<li>その文字自身とは異なる、特別な意味や役割を持つ文字のこと</li>
</ul>
<p>ざっくり分類すると、</p>
<ul>
<li>文字を表すメタキャラクタ：<code>.（ドット）, \w, \W, \s, \S, \d, \D</code>など</li>
<li>繰り返しを表すメタキャラクタ：<code>+, *, ?, {n}, {n,m}, {n,}</code></li>
<li>位置を表すメタキャラクタ：<code>^, $, \b, \B</code></li>
<li>文字集合やグループを作るメタキャラクタ：<code>[], [^], |, (), (?:)</code></li>
<li>その他（後方参照など）：<code>\1, \2, \3, ...</code></li>
</ul>
<p>※正規表現の実装によってサポートされているメタキャラクタが異なるので注意</p>
<h1 id="_6">文字を表すメタキャラクタ<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th>メタキャラクタ</th>
<th>意味</th>
<th>備考</th>
</tr>
</thead>
<tbody>
<tr>
<td>.（ドット）</td>
<td>任意の１文字にマッチ</td>
<td>改行にはマッチしない</td>
</tr>
<tr>
<td>\w</td>
<td>単語を構成する文字にマッチ</td>
<td>wはwordの頭文字</td>
</tr>
<tr>
<td>\W</td>
<td>単語を構成する文字 以外の文字 にマッチ</td>
<td></td>
</tr>
<tr>
<td>\d</td>
<td>数字（0~9）にマッチ</td>
<td>dはdigitの頭文字</td>
</tr>
<tr>
<td>\D</td>
<td>数字 以外の文字 にマッチ</td>
<td></td>
</tr>
<tr>
<td>\s</td>
<td>空白文字（半角スペース、タブ文字他）にマッチ</td>
<td>sはspaceの頭文字</td>
</tr>
<tr>
<td>\S</td>
<td>空白文字 以外の文字 にマッチ</td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="_7">制御文字を表すメタキャラクタ<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th>メタキャラクタ</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>\t</td>
<td>タブ文字</td>
</tr>
<tr>
<td>\v</td>
<td>垂直タブ</td>
</tr>
<tr>
<td>\n</td>
<td>改行文字</td>
</tr>
<tr>
<td>\r</td>
<td>改行文字（キャレッジリターン）</td>
</tr>
<tr>
<td>\f</td>
<td>用紙送り文字</td>
</tr>
<tr>
<td>\a</td>
<td>警告文字</td>
</tr>
<tr>
<td>\e</td>
<td>エスケープ文字</td>
</tr>
</tbody>
</table>
<h1 id="_8">繰り返しを表すメタキャラクタ（量指定子）<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th>メタキャラクタ</th>
<th>意味</th>
<th>備考</th>
</tr>
</thead>
<tbody>
<tr>
<td>{n}</td>
<td>n回以上の繰り返しにマッチ</td>
<td></td>
</tr>
<tr>
<td>{n,m}</td>
<td>n回以上m回以下の繰り返しにマッチ</td>
<td></td>
</tr>
<tr>
<td>{n,}</td>
<td>n回以上の繰り返しにマッチ</td>
<td></td>
</tr>
<tr>
<td>*</td>
<td>0回以上の繰り返しにマッチ</td>
<td>{0,}と同義</td>
</tr>
<tr>
<td>+</td>
<td>1回以上の繰り返しにマッチ</td>
<td>{1,}と同義</td>
</tr>
<tr>
<td>?</td>
<td>0回または1回の繰り返しにマッチ</td>
<td>{0,1}と同義</td>
</tr>
</tbody>
</table>
<h1 id="_9">位置を表すメタキャラクタ（アンカー）<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th>メタキャラクタ</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>$</td>
<td>行末</td>
</tr>
<tr>
<td>^</td>
<td>行頭</td>
</tr>
<tr>
<td>\b</td>
<td>単語境界</td>
</tr>
<tr>
<td>\B</td>
<td>単語境界以外</td>
</tr>
</tbody>
</table>
<h1 id="_10">文字集合やグループを作るメタキャラクタ<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th>メタキャラクタ</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>[abc]</td>
<td>aかbかcのどれか1文字にマッチ</td>
</tr>
<tr>
<td>[a-z]</td>
<td>aからzのどれか1文字にマッチ</td>
</tr>
<tr>
<td>[^abc]</td>
<td>abc以外のどれか1文字にマッチ</td>
</tr>
<tr>
<td><code>abc|def</code></td>
<td>abcまたはdefのパターンにマッチ</td>
</tr>
<tr>
<td>(abc)</td>
<td>グループ化とキャプチャを行う</td>
</tr>
<tr>
<td>(?:abc)</td>
<td>グループ化を行う</td>
</tr>
</tbody>
</table>
<h2 id="a-z">[a-z]について<a class="headerlink" href="#a-z" title="Permanent link">&para;</a></h2>
<ul>
<li>[a-z]のa-zの範囲は文字コードの範囲</li>
<li>Unicodeの文字コード番号を使用して[\u0061-\u007A]のように表すこともできる</li>
</ul>
<h1 id="_11">その他の正規表現の機能<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h1>
<p>以下の機能は、処理系によっては使用できない場合があるので注意すること。</p>
<h2 id="_12">グループ化<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<ul>
<li>(abc)のように括弧内の文字列をひとまとめに扱うこと</li>
</ul>
<p>例1) hogehoge....と「hoge」を繰り返す文字列をマッチさせたい場合、以下で検索するとマッチする。</p>
<pre><code>グループ化の例1
(hoge)+  
</code></pre>
<p>例2) https://www.yahoo.co.jp/ と https://www.google.co.jp/ の両方にマッチさせたい場合、以下で検索するとマッチする</p>
<pre><code>グループ化の例2
https://www\.(google|yahoo)\.co\.jp/
</code></pre>
<p>で検索するとマッチする。</p>
<h2 id="_13">キャプチャ<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h2>
<ul>
<li>(abc)括弧内の文字列を記憶し、参照出来るようにすること</li>
<li>\1 ,\2 ,\3...で前方で記憶した文字列をマッチさせることが出来る</li>
<li>$1 ,$2 ,$3...で記憶した文字列を変数として参照できる（置換にも使える）</li>
</ul>
<p>※使用出来るかどうかが言語によって異なるので注意</p>
<p>例1) hoge_hoge のように、前後が同じものをマッチさせたい</p>
<pre><code>キャプチャのの例1
# 検索文字列
(.+)_\1
</code></pre>
<p>で検索するとマッチする。このように前方でマッチしたものを参照することを 後方参照 という。</p>
<p>例2) <a>https://www.google.co.jp/</a> のaタグ内の値をhref属性に設定したい場合、</p>
<pre><code>キャプチャの例2
# 検索文字列
&lt;a&gt;(.+?)&lt;/a&gt;

# 置換文字列
&lt;a href=&quot;$1&quot;&gt;$1&lt;/a&gt;
</code></pre>
<p>で置換できる。</p>
<p>例3) hoge@fuga.comからのローカル部、ドメイン部、メールアドレス全体を取り出したい場合、</p>
<pre><code>キャプチャの例3
# 検索文字列
((.+)@(.+))

# 置換文字列
メールアドレス=$1\nローカル部=$2\nドメイン部=$3
</code></pre>
<p>で置換すると、以下の結果になる。</p>
<pre><code>例3の結果
メールアドレス=hoge@fuga.com
ローカル部=hoge
ドメイン部=fuga.com
</code></pre>
<p>キャプチャする順番は「(」が現れた順になっている。</p>
<h2 id="_14">キャプチャしない括弧<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>(?:)を使用すると、グループ化のみを行いキャプチャを行わない</p>
</li>
<li>
<p>グループ化のみが目的であることを明示したい場合このように書く</p>
</li>
<li>若干読みにくくなる（可読性が下がる）ので、どちらで書いた方がいいかは状況による</li>
</ul>
<pre><code>キャプチャしない括弧の例
https://www\.(?:google|yahoo)\.co\.jp/ 
</code></pre>
<h2 id="_15">先読みと後読み<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>先読み・後読み</th>
<th>正規表現</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>肯定先読み(positive look forward)</td>
<td>(?=abc)</td>
<td>前方を見てabcがある位置にマッチ</td>
</tr>
<tr>
<td>否定先読み(negative look forward)</td>
<td>(?!abc)</td>
<td>前方を見てabcがない位置にマッチ</td>
</tr>
<tr>
<td>肯定後読み(positive look behind)</td>
<td>(?&lt;=abc)</td>
<td>後方を見てabcがある位置にマッチ</td>
</tr>
<tr>
<td>否定後読み(negative look behind)</td>
<td>(?&lt;!abc)</td>
<td>後方を見てabcがない位置にマッチ</td>
</tr>
</tbody>
</table>
<p>※JavaScript系では後読みは実装されていないので注意</p>
<pre><code>例
customer.fullname
customer.firstName
customer.lastName
employee.firstName
employee.lastName
officer.firstName
officer.lastName
</code></pre>
<ul>
<li>customer(?=.firstName)</li>
<li>→後ろにfirstNameが続くcustomerにマッチ</li>
<li>customer(?!.firstName)</li>
<li>→後ろにfullNameが来ないcustomerにマッチ</li>
<li>(?&lt;=customer.)firstName</li>
<li>→customerの後ろのfirstNameにマッチ</li>
<li>(?&lt;!customer.)firstName</li>
<li>→customer以外の後ろのfirstNameにマッチ</li>
</ul>
<h2 id="_16">～を含む・含まない<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h2>
<ul>
<li>先読み・後読みを応用すると、～を含む・含まない行は以下の正規表現のように表せる</li>
</ul>
<pre><code>abcを含む行・含まない行
# abcを含む行
^(?=.*abc).*

# defを含まない行
^(?!.*def).*
</code></pre>
<p>例)</p>
<p>スペースを含む行を削除したい</p>
<pre><code>スペースを含む行の削除
# 検索文字列
^(?=.* ).*\n

# 置換文字列は空文字
</code></pre>
<h2 id="_17">修飾子<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h2>
<ul>
<li>多くの処理系にはマッチングの処理方法を変更する指定オプションが用意されている</li>
<li>末尾に付ける修飾子をフラグ（flag）と呼ぶ</li>
</ul>
<pre><code>JavaScript
// 修飾子iは大文字と小文字を区別しない（ignoreCase）
// 修飾子gは全てのマッチング箇所を検索する（global）
var regex = /hoge/ig;
</code></pre>
<h1 id="_18">正規表現における注意点<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h1>
<h2 id="_19">最長マッチと最短マッチ<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h2>
<p>思ったよりも長い範囲にマッチしてしまう・・・という時に確認</p>
<ul>
<li>繰り返し文字はデフォルトではマッチしうる最大の文字列にマッチする</li>
<li>繰り返しのメタキャラクタの後ろに 「?」 を付けるとマッチしうる最小の文字列にマッチする</li>
</ul>
<p>例えば、「hoge@hoge.com」からhogeを別々に2つマッチさせたいとする。</p>
<p>正規表現：<code>h.*e</code></p>
<p>とすると、「hoge@hoge」にマッチしてしまうのでNG、</p>
<p>正規表現：<code>h.*?e</code></p>
<p>のようにする必要がある。</p>
<h2 id="_20">基本正規表現と拡張正規表現<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h2>
<p>あれ？正規表現は合ってるのにマッチしない・・・という場合はそもそも機能がサポートされていない可能性がある</p>
<ul>
<li>POSIX正規表現には2種類あり、利用できるメタキャラクタや機能が異なる</li>
</ul>
<table>
<thead>
<tr>
<th>種類</th>
<th>特徴</th>
<th>対応</th>
</tr>
</thead>
<tbody>
<tr>
<td>基本正規表現(basic regular expression:BRE)</td>
<td>grep, sed など</td>
<td>「<code>|</code>」「+」「?」は使用不可「()」「{}」はエスケープが必要</td>
</tr>
<tr>
<td>拡張正規表現(extended regular expression:ERE)</td>
<td>egrep（grep -E）, sed -E など</td>
<td>「+」「?」は使用できる「()」「{}」はエスケープ不要</td>
</tr>
</tbody>
</table>
<ul>
<li>さらにこれに機能を加えた正規表現があり、追加機能が使えるかどうかは実装毎に確認するしかない。</li>
</ul>
<p>参考：<a href="http://jmatsu.hatenablog.com/entry/2017/01/30/130952">3つの正規表現を知らないとハマるヨ</a></p>
<h2 id="_21">エスケープの必要性<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h2>
<p>コード内で正規表現を使用する場合には、エスケープが２重に必要な場合があるので注意</p>
<pre><code>java
// 文字列リテラル
String regex = &quot;hoge\\.com&quot;;

// バックスラッシュの正規表現は\\\\と書く。これで「\」のみにマッチ
String backslashRegex = &quot;\\\\&quot;;
</code></pre>
<h2 id="_22">正規表現リテラル<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h2>
<ul>
<li>正規表現リテラルにはそのまま正規表現を書ける（正規表現のみのエスケープで良い）。</li>
<li>JavaScriptやRubyなどは正規表現リテラルがサポートされているが、Javaはサポートされていない</li>
</ul>
<pre><code>JavaScript
// 正規表現リテラル
var regex = /hoge\.com/;
</code></pre>
<h2 id="_23">正規表現のチェックに役立つサイト<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://regexper.com/">Regexper：正規表現を可視化して確認できる</a></li>
<li><a href="http://regex-testdrive.com/ja/">regex-testdrive：Javaの正規表現チェック</a></li>
<li><a href="http://okumocchi.jp/php/re.php">okumocchi：PHP及びJavaScript正規表現チェック</a></li>
<li><a href="http://regexr.com/">Regexr：JavaScriptの正規表現チェック</a></li>
<li><a href="http://rubular.com/">Rubular：Rubyの正規表現チェック、キャプチャ内容がわかる</a></li>
</ul>
<h1 id="_24">補足・参考<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h1>
<h2 id="_25">「\」（バックスラッシュ）と「¥」（円マークについて）<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h2>
<ul>
<li>Unicodeが広まる以前、和文フォントでは「/」の文字コード（0x5c）に「¥」の表記を割り当てていたため、「\」を入力すると「¥」が表示されるようになった。</li>
<li>その名残で「\」文字コード（0x5c）を入力した場合、「¥」が表示される場合がある。</li>
<li>Unicodeでは「\」の文字コード（U+005c）とは別に、「¥」に文字コード（U+00A5）が割り当てられている。</li>
</ul>
<h2 id="_26">改行コードについて<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h2>
<p>正規表現とは関係ないけどキャレッジリターンってなんぞ？と思ったので調べてみた</p>
<ul>
<li>「CR」「LF」「CRLF」の3種類ある</li>
<li>昔のMacではCR,現在のMacやLinuxなどのUnix系ではLF,windowsではCRLFを採用している</li>
</ul>
<blockquote>
<p>タイプライターにはキャリッジというロールに紙を挟む役目を持つ部品があり、その位置を調節する「キャリッジリターンレバー」と、1行分ロールを回し紙を送ること（ラインフィード）が出来るレバーを順に操作することで改行を行っていた。</p>
</blockquote>
<h2 id="carriage-returncr">キャリッジリターン（carriage return:CR、復帰）<a class="headerlink" href="#carriage-returncr" title="Permanent link">&para;</a></h2>
<ul>
<li>カーソルを行の先頭に戻す指示（左に移動）</li>
</ul>
<h2 id="line-feedlf-newline-end-of-line">ラインフィード（line feed:LF, newline, end-of-line、狭義の改行）<a class="headerlink" href="#line-feedlf-newline-end-of-line" title="Permanent link">&para;</a></h2>
<ul>
<li>カーソルを一つ下の行に移す指示（下に移動）</li>
<li>以前はカーソルを下に移すだけで行頭には戻らなかった（現在は行頭に戻るようになっている）</li>
</ul>
<h2 id="grep">grep<a class="headerlink" href="#grep" title="Permanent link">&para;</a></h2>
<ul>
<li>grepとはedというラインエディタのコマンド g/re/pのコマンドからきている</li>
<li>global Regular Expression printの略</li>
</ul>
<h2 id="validation">バリデーション（validation）とは？<a class="headerlink" href="#validation" title="Permanent link">&para;</a></h2>
<ul>
<li>validate：検証する・（妥当性を）確認する、有効性を確かめる</li>
<li>IT分野では「規定された文法・仕様通りに記述されているかどうかを検証すること」</li>
<li>メールアドレス、パスワード、電話番号、郵便番号など文法のチェックの意味で使われる</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../%E4%B8%80%E8%A1%8C-Python-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E5%B9%B6%E8%A1%8C/" class="btn btn-neutral float-left" title="代码并行"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../taged-VLAN%E3%81%A8untagedVLAN%E3%81%AE%E9%81%95%E3%81%84/" class="btn btn-neutral float-right" title="タグVLAN">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright © 2022 - 2023 - lyvivian0077</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../%E4%B8%80%E8%A1%8C-Python-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E5%B9%B6%E8%A1%8C/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../taged-VLAN%E3%81%A8untagedVLAN%E3%81%AE%E9%81%95%E3%81%84/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
